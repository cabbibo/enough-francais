<!--

  Hey there!

  First off, it means alot that you are checking out the source! 
  If you want to see it on Github, check out:

  http://github.com/cabbibo/enough

  Second off, although alot of the code I'm pretty proud of,
  rushing to release means that there is alot of really disgusting 
  spagetti stuff in hear. Things like the 'PageTurnerMesh' in particular
  are foul beyond belief!


  If you want, you can check out individual pages by adding a #pageName in the url

  aka : http:/cabbi.bo/#sparkles for the sparkles page. The pages are as follows:

  #alone  
  #crystals  #forest  #tree
  #together #friends 
  #sparkles #flocking
  #sun
  #fireworks
  #credits

  If you have questions, let me know on twitter @cabbibo. I'll do my best to answer!

  Huge Thanks to @mrdoob , @thespite , @hughskennedy , @akirodic for all the code help 
  they provided, and @eddietree , @robbietilton , @jonobr1 , @rezasyedali for design pointers

  Last but not least, a MASSIVE thank you goes to all my proof readers for helping make the text 
  slightly less shit.

-->

<html>
  <title> @Cabbibo </title>
  <head>
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link href="/favicon.ico" rel="icon" type="image/x-icon" >
    
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    
    <meta name="twitter:card" content="photo">
    <meta name="twitter:site" content="Enough">
    <meta name="twitter:creator" content="@cabbibo">
    <meta name="twitter:url" content="http://cabbi.bo/enough">
    <meta name="twitter:title" content="Enough: An Audio/Visual Odyssey in the Guise of a Picture Book">
    <meta name="twitter:description" content="Who could be so lucky?\n\nWho comes to a lake for water\nand sees the reflection of the moon.\n\n-Rumi\n">
    <meta name="twitter:creator" content="@cabbibo">
    <meta name="twitter:image" content="http://cabbi.bo/enough/image.png">
    <meta name="twitter:image:width" content="1440">
    <meta name="twitter:image:height" content="900">
    <meta name="twitter:domain" content="cabbi.bo">

    <meta itemprop="name" content="ENOUGH">
    <meta itemprop="description" content="Who could be so lucky?\n\nWho comes to a lake for water\nand sees the reflection of the moon.\n\n-Rumi\n">
    <meta itemprop="image" src="http://cabbi.bo/enough/image.png">
    <meta property="og:title" content="ENOUGH">
    <meta property="og:type" content="website">
    <meta property="og:image" content="http://cabbi.bo/enough/image.png"/>
    <meta property="og:site_name" content="Enough">
    <meta property="og:description" content="Who could be so lucky?\n\nWho comes to a lake for water\nand sees the reflection of the moon.\n\n-Rumi\n">
  </head>

  <body>
    <div id="container"></div>


    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-57632305-1', 'auto');
      ga('send', 'pageview');
    </script>

    <!-- LIBS -->
    <script src="lib/leap.min.js"></script>
    <script src="lib/three.js"></script>
    <script src="lib/jquery.min.js"></script>
    <script src="lib/stats.min.js"></script>
    <script src="lib/dat.gui.min.js"></script>
    <script src="lib/underscore.js"></script>
    <script src="lib/Tween.js"></script>
    <script src="lib/Wagner.js"></script>
    <script src="lib/Wagner.base.js"></script>
    <script src="lib/WagnerLoader.js"></script>
    

    <!-- MY LIBS -->
    <script src="lib/ShaderLoader.js"></script>
    <script src="lib/TrackballControls.js"></script>
    <script src="lib/TileRenderer.js"></script>
    <script src="lib/FileSaver.js"></script>

    <script src="lib/AudioController.js"></script>
    <script src="lib/AudioTexture.js"></script>
    <script src="lib/LoadedAudio.js"></script>
    <script src="lib/UserAudio.js"></script>
    <script src="lib/Looper.js"></script>

    <script src="lib/TextParticles.js"></script>
    <script src="lib/TextCreator.js"></script>

    <script src="lib/ObjectControls.js"></script>
    <script src="lib/RiggedSkeleton.js"></script>

    <script src="lib/ParticleUtils.js"></script>
    <script src="lib/PhysicsRenderer.js"></script>
    <script src="lib/PhysicsArrayRenderer.js"></script>
    
    <script src="lib/Loader.js"></script>
    

    <script src="fonts/PTMono.js"></script>
    

    <!-- Extra javascript stuff for book -->

    <!-- Human Readable Version -->
    <!--<script src="shaders/loadBarShader.js"></script>-->

    <!-- Non Human Readable Version -->
    <script src="shaders/lbs.js"></script>



    <script src="js/PageLoader.js"></script>
    <script src="js/PageTurner.js"></script>
    <script src="js/Page.js"></script>
    
    <script src="js/Section.js"></script>

     


    <!-- Page Scripts -->

    <script src="js/LoadBar.js"></script>     

    <script src="js/global/FurryGroup.js"></script>
    <script src="js/global/FurryTail.js"></script>
    <script src="js/global/FurryHead.js"></script>
    
    <script src="js/global/PhysicsText.js"></script>
    
    <script src="js/global/HandParticles.js"></script>
   
    <script src="js/global/LightRays.js"></script>
    <script src="js/global/DustMotes.js"></script>
    <script src="js/global/Frame.js"></script>
    <script src="js/global/FrameFish.js"></script>
   
    <script src="js/pages/crystals/Crystal.js"></script>
    <script src="js/pages/crystals/CrystalGeo.js"></script>
    <script src="js/pages/crystals/CrystalHalo.js"></script>
    <script src="js/pages/crystals/CrystalParticles.js"></script>
    
    <script src="js/pages/tree/Tree.js"></script>
    <script src="js/pages/tree/TreeLight.js"></script>
    
    <script src="js/pages/forest/Forest.js"></script>
    <script src="js/pages/forest/Monome.js"></script>
    <script src="js/pages/forest/ForestFloor.js"></script>
    
    <script src="js/pages/sparkles/Sparkles.js"></script>

    <script src="js/pages/flocking/Flock.js"></script>
    <script src="js/pages/flocking/Coral.js"></script>
    <script src="js/pages/flocking/CoralFloor.js"></script>
    <script src="js/pages/flocking/CoralBase.js"></script>
    <script src="js/pages/flocking/CreateFlockingGeometry.js"></script>

    <script src="js/pages/sun/GEM.js"></script>
    <script src="js/pages/sun/RepelerMesh.js"></script>
    <script src="js/pages/sun/Sunflower.js"></script>
    <script src="js/pages/sun/LookingGlass.js"></script>
  
    <script src="js/pages/sun/Hyperborder.js"></script>
    <script src="js/pages/sun/Hyperdots.js"></script>

    <script src="js/pages/fireworks/Firework.js"></script>
    <script src="js/pages/fireworks/Water.js"></script>
    <script src="js/pages/fireworks/Mirror.js"></script>
    <script src="js/pages/fireworks/Mountains.js"></script>

    <script src="js/pages/credits/Donate.js"></script>

    <!-- THESE ALWAYS GOES LAST -->
    <script src="js/Global.js"></script>

    <!-- The Pages -->
    <script src="js/alone.js"></script>
    <script src="js/crystals.js"></script>
    <script src="js/forest.js"></script>
    <script src="js/tree.js"></script>
    <script src="js/together.js"></script>
    <script src="js/friends.js"></script>
    <script src="js/sparkles.js"></script>
    <script src="js/flocking.js"></script>
    <script src="js/sun.js"></script>
    <script src="js/fireworks.js"></script>
    <script src="js/credits.js"></script>

    <!--<script src="js/text.js"></script>-->
    <script src="js/textFrench.js"></script>




    <script>



      G.loadBar.start();
      G.animate();


      var startingPage = "alone";

      var url = document.URL;
      var stringArray = url.split("#");
      if( stringArray[1] ){ startingPage = stringArray[1]; }



      // TODO: 
      // Write shaders for hands


      //G.audio.mute.gain.value = 0;
      //G.loadBarTransitionTime = .1;

      G.loadBarTransitionTime = 300;




      G.loader.addLoad();

      // For Hands
      G.shaders.load( 'global/vs-rHand' , 'rHand' , 'vertex'    );
      G.shaders.load( 'global/fs-rHand' , 'rHand' , 'fragment'  );
      G.shaders.load( 'global/vs-lHand' , 'lHand' , 'vertex'    );
      G.shaders.load( 'global/fs-lHand' , 'lHand' , 'fragment'  );
      
      G.shaders.load( 'global/vs-handParticles' , 'handParticles' , 'vertex'      );
      G.shaders.load( 'global/fs-handParticles' , 'handParticles' , 'fragment'    );
      G.shaders.load( 'global/ss-handParticles' , 'handParticles' , 'simulation'  );

      // For Tails
      var f = 'global/';

      G.shaders.load(  f + 'vs-furryParticles' , 'furryParticles' , 'vs' );
      G.shaders.load(  f + 'fs-furryParticles' , 'furryParticles' , 'fs' );
      G.shaders.load(  f + 'vs-furryTail'      , 'furryTail'      , 'vs' );
      G.shaders.load(  f + 'fs-furryTail'      , 'furryTail'      , 'fs' );
      G.shaders.load(  f + 'vs-furryHead'      , 'furryHead'      , 'vs' );
      G.shaders.load(  f + 'fs-furryHead'      , 'furryHead'      , 'fs' );
      G.shaders.load(  f + 'furryTailSim'      , 'furryTailSim'   , 'ss' );
      G.shaders.load(  f + 'furryHeadSim'      , 'furryHeadSim'   , 'ss' );

      
      // For light rays
      G.shaders.load(  f + 'vs-lightRays' , 'lightRays' , 'vs' );
      G.shaders.load(  f + 'fs-lightRays' , 'lightRays' , 'fs' );

      // For light rays
      G.shaders.load(  f + 'vs-dustMote' , 'dustMote' , 'vs' );
      G.shaders.load(  f + 'fs-dustMote' , 'dustMote' , 'fs' );
     
      // For frame
      G.shaders.load(  f + 'vs-frame' , 'frame' , 'vs' );
      G.shaders.load(  f + 'fs-frame' , 'frame' , 'fs' );
      
      G.shaders.load(  f + 'vs-frameFish' , 'frameFish' , 'vs' );
      G.shaders.load(  f + 'fs-frameFish' , 'frameFish' , 'fs' );
      G.shaders.load(  f + 'ss-frameFish' , 'frameFish' , 'ss' );
      

      // For text
      G.shaders.load( 'global/vs-text' , 'text' , 'vertex'    );
      G.shaders.load( 'global/fs-text' , 'text' , 'fragment'  );
      G.shaders.load( 'global/ss-text' , 'text' , 'simulation'  );

      G.shaders.shaderSetLoaded = function(){
        G.loader.onLoad();
      }

      G.loadTextures();

      var pageArray = [
        G.pages.alone,
        G.pages.crystals,
        G.pages.forest,
        G.pages.tree,
        G.pages.together,
        G.pages.friends,
        G.pages.sparkles,
        G.pages.flocking,
        G.pages.sun,
        G.pages.fireworks,
        G.pages.credits,
      ]

      for( var i = 0; i < pageArray.length; i++ ){
        if( i - 1  >=  0 ){ 
          pageArray[i].prevPage = pageArray[ i - 1 ]
        }
        if( i + 1  < pageArray.length ){ 
          pageArray[i].nextPage = pageArray[ i + 1 ]
        }

      }


      G.addToStartArray( function(){

        var s = G.pages[ startingPage ];
        


        s.init();
        s.addToOnLoadArray( function(){


          G.position.copy( this.position );

          for( var  i =0; i < this.sections.length; i++ ){

            this.sections[i].cameraPosition.add( this.position );
            this.sections[i].lookPosition.add( this.position );

          }

          this.cameraPos.copy(  this.sections[0].cameraPosition ); //page.nextPage.position );

          this.sections[0].frame.uniforms.opacity.value = 1;
          G.lookAt.copy(  this.sections[0].lookPosition );
          // this.cameraPos.add( this.position );
          G.camera.position.copy( this.cameraPos );
          G.camera.lookAt( G.lookAt );//= 1000;

          this.addToStartArray(function(){
            this.activate();

            if( this.mani ){
              G.mani.activate();
              G.mani.transport( this.position );
            }

            if( this.sol ){
              G.sol.activate();
              G.sol.transport( this.position );
              G.solAttractor.copy( this.position );
            }
          }.bind( this));

          this.start();

        }.bind( s ));

      
      }.bind( G ) );



    </script>

  </body>
</html>
